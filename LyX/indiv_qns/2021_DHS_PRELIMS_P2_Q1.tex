\item \textbf{{[}DHS/PRELIM/9569/2021/P2/Q1{]} }

\textbf{Task 1}

For this task, submit all code as \texttt{T1\_<index number>\_<name>.py}. 

The Taliban\textquoteright s takeover of Afghanistan had seen the
United States (US) evacuating people. The Republic of Singapore Air
Force offers its A330 Multi-Role Tanker Transport plane (A330 MRTT)
to help the US airlift groups of evacuees from Afghanistan. 

\subsubsection*{Task 1.1 }

To prevent Taliban interference, messages sent between evacuees and
the A330 MRTT are encrypted. 

The encryption converts each character of the message into its ASCII
number representation, adds the ASCII number representation of a character
of a secret key which is in the same position, and then converts it
back into ASCII text. 

Secret keys are generated from passwords known only by the sender
and receiver. Passwords that are shorter in length than the message
are lengthened to match by repeating the password until the same length
as the message is achieved. 

For example, given that the inputs are 

\texttt{password : \textquotedbl cat\textquotedbl{} }

\texttt{message ~: \textquotedbl hello\textquotedbl} 

Step 1 - Extend password by repeating until matches length of message 

\texttt{\textquotedbl cat\textquotedbl{} -> \textquotedbl catca\textquotedbl{} }

Step 2 - Convert each character of password and message into ASCII
number representation 

\texttt{\textquotedbl hello\textquotedbl{} -> 104, 101, 108, 108,
111 }

\texttt{\textquotedbl catca\textquotedbl{} -> 99, 97, 116, 99, 97 }

Step 3 - Add the ASCII number representation of same positions together 

\texttt{104+99, 101+97, 108+116, 108+99, 111+97 -> 203, 198, 224,
207, 208 }

Step 4 - Convert each number to its ASCII character 

\texttt{203, 198, 224, 207, 208 -> \textquotedbl À∆‡œ–\textquotedbl{} }

Therefore, the results are 

\texttt{Secret key : \textquotedbl catca\textquotedbl{} }

\texttt{Encrypted message : \textquotedbl À∆‡œ–\textquotedbl{} }

Write a function \texttt{generateKey(password, message)} that takes
in two argument strings \texttt{message} and \texttt{password} and
returns the secret key. 

Test your function using \texttt{generateKey(\textquotedbl cat\textquotedbl ,
\textquotedbl hello\textquotedbl )} and show your output. \hfill{}{[}4{]}

\subsubsection*{Task 1.2 }

Write functions \texttt{encrypt(password, message)} and \texttt{decrypt(password,
message)} that takes in \texttt{password} and message strings and
returns the encrypted or decrypted \texttt{message}. It should use
the above function \texttt{generateKey(password, message)} to obtain
the secret key before performing the encryption. 

Test your function with \texttt{decrypt(\textquotedbl cat\textquotedbl ,
encrypt(\textquotedbl cat\textquotedbl ,\textquotedbl hello\textquotedbl ))}.
Show your output. \hfill{}{[}6{]}

\subsubsection*{Task 1.3 }

Since the A330 MRTT plane can only take a maximum of 266 passengers
at once, implement a \texttt{Queue} to manage incoming pickup requests
and dropoffs. Write a class Queue with the following methods: 
\begin{itemize}
\item \texttt{enqueue(string)} which takes in a string and adds it to the
queue or returns \texttt{\textquotedbl Queue is full!\textquotedbl}
if queue is full 
\item \texttt{dequeue} which removes the next item for the queue or returns
\texttt{\textquotedbl Queue is empty!\textquotedbl} if the queue
is empty 
\item \texttt{display} which returns a string of queue items in sequence
from head to tail or returns \texttt{\textquotedbl Queue is empty!\textquotedbl}
if the queue is empty
\item \texttt{current\_size} which returns an integer of the number of items
in the queue. \hfill{}{[}8{]}
\end{itemize}

\subsubsection*{Task 1.4 }

Using socket programming, write the client program for the evacuee
teams (client) in Afghanistan and the A330 MRTT plane (server) to
communicate. The program should 
\begin{itemize}
\item use the above queue data structure to manage the requests 
\item request the user to set a password for encryption at the start of
the program 
\item present the user with incoming pickup requests and pickup details
(Team name and group size) as well as queue details (size of current
queue) 
\item allow the user(server) to accept/reject pickup requests 
\item encrypt all information sent and received using \texttt{encrypt(password,
message)} and \texttt{decrypt(password, message)} functions. 
\end{itemize}
You are provided with the client program in \texttt{client.py}. Write
and submit the server program as \texttt{T1\_<index number>\_<name>.py}. 

Study the following sample program output to determine your code design,
output format and socket protocol. User inputs are underlined. 

\noindent %
\noindent\fbox{\begin{minipage}[t]{1\columnwidth - 2\fboxsep - 2\fboxrule}%
\textbf{Sample server program:}

\texttt{Please set a password: Answer: }\texttt{\uline{WDIB4}}\texttt{ }

\texttt{Next action? }

\texttt{Menu: }

\texttt{1) Wait for connection from client for next pickup request }

\texttt{2) Dequeue }

\texttt{Type an option:}\texttt{\uline{2}}\texttt{ \bigskip{}
}

\texttt{Queue is empty! \bigskip{}
}

\texttt{Next action? }

\texttt{Menu:}

\texttt{1) Wait for connection from client for next pickup request }

\texttt{2) Dequeue }

\texttt{Type an option:}\texttt{\uline{1}}\texttt{ }

\texttt{\bigskip{}
Awaiting connection from pickup client... }

\texttt{\bigskip{}
Connection established! }

\texttt{Receiving data from client\dots{} }

\texttt{Checking client's secret key\dots{} }

\texttt{Client's secret key is correct! }

\texttt{\bigskip{}
Client's Team name: Team1 }

\texttt{Group size: 143}

\texttt{No. of passengers in queue: 0 }

\texttt{You have capacity for them. }

\texttt{\bigskip{}
Confirm pickup? Y/N? }

\texttt{Answer:}\texttt{\uline{Y}}\texttt{ \bigskip{}
}

\texttt{Added to queue. }

\texttt{Items in queue now are: Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, }

\texttt{Connection disconnected. }

\texttt{\bigskip{}
Next action? Menu: }

\texttt{1) Wait for connection from client for next pickup request }

\texttt{2) Dequeue }

\texttt{Type an option:}\texttt{\uline{1}}\texttt{ }

\texttt{\bigskip{}
Awaiting connection from pickup client... }

\texttt{\bigskip{}
Connection established! }

\texttt{Receiving data from client\dots{} }

\texttt{Checking client's secret key\dots{} }

\texttt{Client's secret key is correct! }

\texttt{\bigskip{}
Client's Team name: Team2 }

\texttt{Group size: 151 }

\texttt{No. of passengers in queue: 143 }

\texttt{You do NOT have capacity for them. }

\texttt{Connection disconnected. \bigskip{}
Next action? }

\texttt{Menu: }

\texttt{1) Wait for connection from client for next pickup request }

\texttt{2) Dequeue }

\texttt{Type an option:}\texttt{\uline{1}}\texttt{ }

\texttt{\bigskip{}
}

\texttt{Awaiting connection from pickup client... }

\texttt{\bigskip{}
Connection established! }

\texttt{Receiving data from client\dots{} }

\texttt{Checking client's secret key\dots{} }

\texttt{Client's secret key is correct!\bigskip{}
}

\texttt{Client's Team name: Team3 }

\texttt{Group size: 19 }

\texttt{No. of passengers in queue: 143}

\texttt{You have capacity for them. \bigskip{}
}

\texttt{Confirm pickup? Y/N? }

\texttt{Answer:}\texttt{\uline{N}}\texttt{ }

\texttt{\bigskip{}
Connection disconnected. \bigskip{}
Next action? }

\texttt{Menu: }

\texttt{1) Wait for connection from client for next pickup request }

\texttt{2) Dequeue }

\texttt{Type an option:}\texttt{\uline{1}}\texttt{ }

\texttt{\bigskip{}
Awaiting connection from pickup client... }

\texttt{\bigskip{}
Connection established! }

\texttt{Receiving data from client\dots{} }

\texttt{Checking client's secret key\dots{} }

\texttt{Client's secret key is correct!}

\texttt{\bigskip{}
Client's Team name: Team4 }

\texttt{Group size: 15 }

\texttt{No. of passengers in queue: 143 }

\texttt{You have capacity for them. }

\texttt{\bigskip{}
Confirm pickup? Y/N? }

\texttt{Answer:}\texttt{\uline{Y}}\texttt{ }

\texttt{\bigskip{}
Added to queue. Items in queue now are: }

\texttt{Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1, Team1,
Team1, Team1, Team1, Team1, Team4, Team4, Team4, Team4, Team4, Team4,
Team4, Team4, Team4, Team4, Team4, Team4, Team4, Team4, Team4, }

\texttt{Connection disconnected. }

\texttt{\bigskip{}
Next action? }

\texttt{Menu: }

\texttt{1) Wait for connection from the next pickup location client }

\texttt{2) Dequeue }

\texttt{Type an option:}\texttt{\uline{2}}\texttt{ }

\texttt{\bigskip{}
How many to dequeue? 143}

\texttt{\bigskip{}
Items in queue now are: }

\texttt{Team4, Team4, Team4, Team4, Team4, Team4, Team4, Team4, Team4,
Team4, Team4, Team4, Team4, Team4, Team4, }

\texttt{Connection disconnected. }

\texttt{\bigskip{}
Next action? }

\texttt{Menu: }

\texttt{1) Wait for connection from client for next pickup request }

\texttt{2) Dequeue}

\texttt{Type an option:}\texttt{\uline{1}}\texttt{ }

\texttt{\bigskip{}
Awaiting connection from pickup client... }

\texttt{\bigskip{}
Connection established! }

\texttt{Receiving data from client\dots{} }

\texttt{Wrong secret key. }

\texttt{Connection disconnected. }

\texttt{\bigskip{}
Next action? }

\texttt{Menu: }

\texttt{1) Wait for connection from client for next pickup request }

\texttt{2) Dequeue }

\texttt{Type an option:}%
\end{minipage}}

\noindent %
\noindent\fbox{\begin{minipage}[t]{1\columnwidth - 2\fboxsep - 2\fboxrule}%
\texttt{Sample client programs (in sequence): }

\texttt{\textbf{\emph{CLIENT 1 }}}

\texttt{Please set a password. }

\texttt{Answer: }\texttt{\uline{WDIB4 }}

\texttt{\bigskip{}
}

\texttt{What is your Team Name? }

\texttt{Answer: }\texttt{\uline{Team1}}\texttt{ }

\texttt{\bigskip{}
}

\texttt{Group size?}

\texttt{Answer: }\texttt{\uline{143}}\texttt{ }

\texttt{\bigskip{}
}

\texttt{Establishing connection... }

\texttt{Connection established! }

\texttt{Data sent! }

\texttt{\bigskip{}
}

\texttt{Waiting for the server to confirm your request\dots{} }

\texttt{\bigskip{}
}

\texttt{Pickup confirmed! Please wait for pickup. }

\texttt{\bigskip{}
}

\texttt{Connection disconnected. }

\texttt{\bigskip{}
}

\texttt{\textbf{\emph{CLIENT 2}}}\texttt{\emph{ }}

\texttt{Please set a password. }

\texttt{Answer: }\texttt{\uline{WDIB4}}\texttt{ solver(\textquotedbl ((1{*}7)+6)\textquotedbl )\bigskip{}
}

\texttt{What is your Team Name? }

\texttt{Answer: }\texttt{\uline{Team2}}\texttt{ \bigskip{}
}

\texttt{Group size? }

\texttt{Answer: }\texttt{\uline{151}}\texttt{ \bigskip{}
}

\texttt{Establishing connection... }

\texttt{Connection established! }

\texttt{Data sent! \bigskip{}
}

\texttt{Waiting for the server to confirm your request\dots{} \bigskip{}
}

\texttt{Pickup rejected! }

\texttt{Wrong password or request rejected. }

\texttt{Please try again. Connection disconnected. \bigskip{}
}

\texttt{\textbf{\emph{CLIENT 3}}}\texttt{ }

\texttt{Please set a password. }

\texttt{Answer: }\texttt{\uline{WDIB4}}\texttt{ \bigskip{}
}

\texttt{What is your Team Name? }

\texttt{Answer: }\texttt{\uline{Team3}}\texttt{ \bigskip{}
}

\texttt{Group size? }

\texttt{Answer: }\texttt{\uline{19}}\texttt{ \bigskip{}
}

\texttt{Establishing connection... }

\texttt{Connection established! }

\texttt{Data sent! \bigskip{}
}

\texttt{Waiting for the server to confirm your request\dots{} \bigskip{}
}

\texttt{Pickup rejected! }

\texttt{Wrong password or request rejected. }

\texttt{Please try again. \bigskip{}
}

\texttt{Connection disconnected. \bigskip{}
}

\texttt{\textbf{\emph{CLIENT 4 }}}

\texttt{Please set a password. }

\texttt{Answer: }\texttt{\uline{WDIB4}}\texttt{ \bigskip{}
}

\texttt{What is your Team Name? }

\texttt{Answer: }\texttt{\uline{Team4}}\texttt{ \bigskip{}
}

\texttt{Group size? }

\texttt{Answer: }\texttt{\uline{15}}\texttt{ \bigskip{}
}

\texttt{Establishing connection... }

\texttt{Connection established! }

\texttt{Data sent! \bigskip{}
}

\texttt{Waiting for the server to confirm your request\dots{} \bigskip{}
}

\texttt{Pickup confirmed! Please wait for pickup to arrive. \bigskip{}
}

\texttt{Connection disconnected. \bigskip{}
}

\texttt{\textbf{\emph{CLIENT 4 }}}

\texttt{Please set a password. }

\texttt{Answer: }\texttt{\uline{FEWF}}\texttt{ }

\texttt{What is your Team Name? }

\texttt{Answer: }\texttt{\uline{Team5}}\texttt{ }

\texttt{Group size? }

\texttt{Answer: }\texttt{\uline{10}}\texttt{ \bigskip{}
}

\texttt{Establishing connection... }

\texttt{Connection established! }

\texttt{Data sent! \bigskip{}
}

\texttt{Waiting for the server to confirm your request\dots{} \bigskip{}
}

\texttt{Pickup cancelled. }

\texttt{Wrong password or request rejected. }

\texttt{Please try again. \bigskip{}
}

\texttt{Connection disconnected.}%
\end{minipage}}

\hfill{}{[}15{]}