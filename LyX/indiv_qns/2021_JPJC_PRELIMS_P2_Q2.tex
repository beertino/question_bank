\item \textbf{{[}JPJC/PRELIM/9569/2021/P2/Q2{]} }

Name your Python file as 

\texttt{TASK2\_<your name>\_<class>\_<index number>.py} 

You will build a simplified, one-player version of the classic board
game Battleship. Refer to \texttt{Task2\_Client\_SampleOutput.JPG}
for the sample output. 

In this version of the game: 
\begin{itemize}
\item The\textbf{ server program} initialises a grid measuring 4 metres
by 5 metres. 
\item The grid is to be represented on the screen by a rectangular grid. 
\item Each square metre of the grid is represented by an \texttt{x}-coordinate
and a \texttt{y}-coordinate. 
\item The top left square metre of the grid display has \texttt{x = 0} and
\texttt{y = 0}. 
\item Use \textquotedbl\texttt{O}\textquotedbl{} to represent an unoccupied
space. 
\item There will be a single ship hidden in a random location. 
\item The ship only occupies one square metre of the grid. 
\item The \textbf{client program} allows the player to input guesses to
sink the ship. After each guess, \textquotedbl\texttt{X}\textquotedbl{}
represents the incorrect position guessed while \textquotedbl\texttt{S}\textquotedbl{}
represents the sunken ship. 
\item The ship will not appear if it has not been sunk. 
\item The game is terminated by the server program when \textbf{three} guesses
are used or the player has guessed the correct position. 
\end{itemize}

\subsubsection*{Task 2.1 }

Write the code for the following functions and procedures for the
\textbf{server program}. \hfill{}{[}8{]}

\begin{tabular}{|l|l|}
\hline 
\textbf{Subroutine Header} & \textbf{Description}\tabularnewline
\hline 
\texttt{InitialiseGrid(): ARRAY{[}0:3, 0:4{]} OF CHAR } & Initialises a 4 by 5 two-dimensional array and returns the array.
Use \textquotedbl\texttt{O}\textquotedbl{} to represent blank.\tabularnewline
\hline 
\texttt{DisplayGrid(arr: ARRAY{[}0:3, 0:4{]} OF CHAR) } & Sends the encoded grid to the client. \tabularnewline
\hline 
\texttt{ValidateRow(row: INTEGER): BOOLEAN } & Returns \texttt{True} if the row is valid and \texttt{False} otherwise.\tabularnewline
\hline 
\texttt{ValidateCol(col: INTEGER): BOOLEAN } & Returns \texttt{True} if the column is valid and \texttt{False} otherwise. \tabularnewline
\hline 
\texttt{CheckResult(row,col:INTEGER): BOOLEAN } & Checks if the guess is correct. If the guess is correct, uses \textquotedbl\texttt{S}\textquotedbl{}
to represent the sunken ship. Otherwise, uses \textquotedbl\texttt{X}\textquotedbl{}
to represent incorrect guess. Returns \texttt{True} for the correct
guess and returns \texttt{False} for the wrong guess.\tabularnewline
\hline 
\end{tabular}

\subsubsection*{Task 2.2 }

The following client program is given in \texttt{Battleship\_Client.py}. 

\noindent\begin{minipage}[t]{1\columnwidth}%
\texttt{import socket }

\texttt{client\_socket = socket.socket() }

\medskip{}

\texttt{address = input('Enter IPv4 address of server: ') }

\texttt{port = int(input('Enter port number of server: ')) }

\texttt{client\_socket.connect((address, port)) }\medskip{}

\texttt{while True: }

\texttt{\qquad{}data = client\_socket.recv(1024)}

\texttt{\qquad{}if b\textquotedbl Enter\textquotedbl{} in data: }

\texttt{\qquad{}\qquad{}choice = input(data.decode()) }

\texttt{\qquad{}\qquad{}client\_socket.sendall(choice.encode()) }

\texttt{\qquad{}\qquad{}print() }

\texttt{\qquad{}else: }

\texttt{\qquad{}\qquad{}print(data.decode()) }

\texttt{\qquad{}\qquad{}if b\textquotedbl GAME OVER\textquotedbl{}
in data or b\textquotedbl YOU WON\textquotedbl{} in data: }

\texttt{\qquad{}\qquad{}\qquad{}break }\medskip{}

\texttt{client\_socket.close() }%
\end{minipage}

Write the corresponding server program that: \hfill{}{[}16{]}
\begin{itemize}
\item Instantiates the server socket. 
\item Binds the socket to localhost and port number 6789. 
\item Listens for incoming request, accepts incoming request and establishes
connection with the client. 
\item Generates a random position for the hidden ship. 
\item Sends a \textquotedblleft Welcome to Battleship!\textquotedblright{}
message to the client. 
\item Uses the subroutines coded in Task 2.1 to play the game. 
\item Sends \textquotedbl\texttt{YOU WON!}\textquotedbl{} to the client
for the correct guess and ends the game. 
\item Sends \textquotedbl\texttt{GAME OVER\dots }\textquotedbl{} to the
client if three guesses are used. 
\item Closes the sockets.
\end{itemize}